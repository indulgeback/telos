#!/bin/sh
. "$(dirname "$0")/_/husky.sh"

echo "ğŸ” è¿è¡Œä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–..."

# è¿è¡Œ web é¡¹ç›®çš„ lint:fix
echo "ğŸ“ ä¿®å¤ ESLint é—®é¢˜..."
if ! pnpm --filter ./apps/web lint:fix; then
  echo "âŒ ESLint ä¿®å¤å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨ä¿®å¤åå†æäº¤"
  exit 1
fi

# è¿è¡Œ web é¡¹ç›®çš„ format
echo "ğŸ¨ æ ¼å¼åŒ–ä»£ç ..."
if ! pnpm --filter ./apps/web format; then
  echo "âŒ ä»£ç æ ¼å¼åŒ–å¤±è´¥ï¼Œè¯·æ£€æŸ¥ä»£ç è¯­æ³•"
  exit 1
fi

echo "âœ… ä»£ç æ£€æŸ¥å’Œæ ¼å¼åŒ–å®Œæˆï¼"